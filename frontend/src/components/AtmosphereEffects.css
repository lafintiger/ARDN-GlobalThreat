/* Atmosphere Effects Styles */

/* Glitch overlay */
.atmosphere-glitch {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 9998;
  background: 
    linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 0, 0, 0.03) 15%,
      transparent 15.5%,
      transparent 50%,
      rgba(0, 255, 255, 0.03) 50%,
      transparent 50.5%
    );
  background-size: 100% 100%;
  mix-blend-mode: overlay;
}

.atmosphere-glitch.flicker {
  animation: glitch-flicker 0.15s steps(2) forwards;
  background: rgba(255, 255, 255, 0.1);
}

@keyframes glitch-flicker {
  0% { opacity: 0.5; transform: translateX(-2px); }
  25% { opacity: 0; transform: translateX(2px); }
  50% { opacity: 0.3; transform: translateX(-1px) skewX(1deg); }
  75% { opacity: 0; transform: translateX(1px); }
  100% { opacity: 0; transform: translateX(0); }
}

/* Danger red overlay */
.atmosphere-danger-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 9997;
  background: radial-gradient(circle at center, transparent 0%, rgba(255, 0, 0, 0.3) 100%);
  animation: danger-pulse 2s ease-in-out infinite;
}

@keyframes danger-pulse {
  0%, 100% { opacity: var(--danger-opacity, 0); }
  50% { opacity: calc(var(--danger-opacity, 0) * 1.5); }
}

/* Enhanced scanlines */
.atmosphere-scanlines {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 9996;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.3) 2px,
    rgba(0, 0, 0, 0.3) 4px
  );
  animation: scanline-move 8s linear infinite;
}

@keyframes scanline-move {
  0% { background-position: 0 0; }
  100% { background-position: 0 100px; }
}

/* Dynamic vignette */
.atmosphere-vignette {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 9995;
  background: radial-gradient(
    ellipse at center,
    transparent 0%,
    transparent 40%,
    rgba(0, 0, 0, var(--vignette-intensity, 0.3)) 100%
  );
}

/* Warning overlays */
.warning-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 9990;
}

/* Final warning - collapse imminent */
.warning-overlay.warning-final {
  background: rgba(50, 0, 0, 0.3);
  animation: final-warning 0.5s ease-in-out infinite;
}

@keyframes final-warning {
  0%, 100% { background: rgba(50, 0, 0, 0.3); }
  50% { background: rgba(80, 0, 0, 0.5); }
}

.warning-content.final {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  animation: final-pulse 1s ease-in-out infinite;
}

.warning-content.final .warning-icon {
  font-size: 5rem;
  color: var(--red);
  text-shadow: 0 0 30px var(--red);
  animation: icon-flash 0.3s ease-in-out infinite;
}

@keyframes icon-flash {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.warning-content.final .warning-text {
  font-family: var(--font-display);
  font-size: 2rem;
  color: var(--red);
  letter-spacing: 5px;
  text-shadow: 0 0 20px var(--red);
  margin: 20px 0;
}

.warning-content.final .warning-countdown {
  font-family: var(--font-mono);
  font-size: 4rem;
  color: #fff;
  text-shadow: 0 0 30px var(--red);
}

@keyframes final-pulse {
  0%, 100% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(1.02); }
}

/* Imminent warning - stripes at edges */
.warning-content.imminent {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

.warning-stripe {
  position: absolute;
  width: 100%;
  height: 5px;
  background: repeating-linear-gradient(
    90deg,
    var(--red) 0px,
    var(--red) 20px,
    transparent 20px,
    transparent 40px
  );
  animation: stripe-move 1s linear infinite;
}

.warning-stripe:first-child {
  top: 0;
}

.warning-stripe:last-child {
  bottom: 0;
  animation-direction: reverse;
}

@keyframes stripe-move {
  0% { background-position: 0 0; }
  100% { background-position: 40px 0; }
}

/* Critical warning - corner brackets */
.warning-content.critical {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

.warning-corner {
  position: absolute;
  width: 50px;
  height: 50px;
  border: 3px solid var(--red);
  animation: corner-pulse 1s ease-in-out infinite;
}

.warning-corner.tl {
  top: 20px;
  left: 20px;
  border-right: none;
  border-bottom: none;
}

.warning-corner.tr {
  top: 20px;
  right: 20px;
  border-left: none;
  border-bottom: none;
}

.warning-corner.bl {
  bottom: 20px;
  left: 20px;
  border-right: none;
  border-top: none;
}

.warning-corner.br {
  bottom: 20px;
  right: 20px;
  border-left: none;
  border-top: none;
}

@keyframes corner-pulse {
  0%, 100% { 
    opacity: 1;
    box-shadow: 0 0 10px var(--red);
  }
  50% { 
    opacity: 0.5;
    box-shadow: 0 0 20px var(--red);
  }
}

/* Chromatic aberration */
.atmosphere-chromatic {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 9994;
  background: 
    linear-gradient(
      90deg,
      rgba(255, 0, 0, 0.02) 0%,
      transparent 33%,
      transparent 66%,
      rgba(0, 255, 255, 0.02) 100%
    );
  animation: chromatic-shift 3s ease-in-out infinite;
}

@keyframes chromatic-shift {
  0%, 100% { transform: translateX(calc(var(--chromatic-offset, 0px) * -1)); }
  50% { transform: translateX(var(--chromatic-offset, 0px)); }
}

/* Static noise */
.atmosphere-static {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 9993;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  animation: static-move 0.1s steps(5) infinite;
}

@keyframes static-move {
  0% { transform: translate(0, 0); }
  25% { transform: translate(-1px, 1px); }
  50% { transform: translate(1px, -1px); }
  75% { transform: translate(-1px, -1px); }
  100% { transform: translate(1px, 1px); }
}

/* Screen shake - apply to body when triggered */
.screen-shake-trigger ~ * {
  animation: screen-shake 0.1s ease-in-out;
}

@keyframes screen-shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-3px) rotate(-0.5deg); }
  75% { transform: translateX(3px) rotate(0.5deg); }
}

/* Blackout effect - can be triggered */
.atmosphere-blackout {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: #000;
  pointer-events: none;
  z-index: 10000;
  animation: blackout-flicker 0.5s steps(3) forwards;
}

@keyframes blackout-flicker {
  0% { opacity: 0; }
  20% { opacity: 1; }
  40% { opacity: 0.3; }
  60% { opacity: 0.8; }
  80% { opacity: 0.2; }
  100% { opacity: 0; }
}



